<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Prelude.Variants</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-prelude/tree/master/Prelude/Variants.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">-------------------------------------------------------------------------------------</a>
<a id="87" class="Comment">-- Typeclass-based approach to implicit sums/variants.</a>
<a id="142" class="Comment">-- We only give two instances: the left and right injection.</a>
<a id="203" class="Comment">--</a>
<a id="206" class="Comment">-- The usecase is having arguments that can be elements of any of two types.</a>
<a id="283" class="Comment">-------------------------------------------------------------------------------------</a>
<a id="369" class="Keyword">module</a> <a id="376" href="Prelude.Variants.html" class="Module">Prelude.Variants</a> <a id="393" class="Keyword">where</a>

<a id="400" class="Keyword">open</a> <a id="405" class="Keyword">import</a> <a id="412" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="424" class="Symbol">;</a> <a id="426" class="Keyword">open</a> <a id="431" href="Prelude.Init.html#504" class="Module">SetAsType</a>

<a id="442" class="Keyword">private</a> <a id="450" class="Keyword">pattern</a> <a id="𝕃"></a><a id="458" href="Prelude.Variants.html#458" class="InductiveConstructor">𝕃</a> <a id="460" class="Symbol">=</a> <a id="462" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="467" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="471" class="Symbol">;</a> <a id="473" class="Keyword">pattern</a> <a id="ℝ"></a><a id="481" href="Prelude.Variants.html#481" class="InductiveConstructor">ℝ</a> <a id="483" class="Symbol">=</a> <a id="485" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="490" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="496" class="Keyword">record</a> <a id="_∣_"></a><a id="503" href="Prelude.Variants.html#503" class="Record Operator">_∣_</a> <a id="507" class="Symbol">(</a><a id="508" href="Prelude.Variants.html#508" class="Bound">A</a> <a id="510" href="Prelude.Variants.html#510" class="Bound">B</a> <a id="512" href="Prelude.Variants.html#512" class="Bound">X</a> <a id="514" class="Symbol">:</a> <a id="516" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="520" class="Symbol">)</a> <a id="522" class="Symbol">:</a> <a id="524" href="Agda.Primitive.html#320" class="Primitive">Type₁</a> <a id="530" class="Keyword">where</a>
  <a id="538" class="Keyword">field</a> <a id="_∣_.X≡"></a><a id="544" href="Prelude.Variants.html#544" class="Field">X≡</a> <a id="547" class="Symbol">:</a> <a id="549" class="Symbol">(</a><a id="550" href="Prelude.Variants.html#512" class="Bound">X</a> <a id="552" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="554" href="Prelude.Variants.html#508" class="Bound">A</a><a id="555" class="Symbol">)</a> <a id="557" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="559" class="Symbol">(</a><a id="560" href="Prelude.Variants.html#512" class="Bound">X</a> <a id="562" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="564" href="Prelude.Variants.html#510" class="Bound">B</a><a id="565" class="Symbol">)</a>
  <a id="569" class="Keyword">syntax</a> <a id="576" href="Prelude.Variants.html#544" class="Field">X≡</a> <a id="579" class="Symbol">{</a><a id="580" class="Bound">A</a><a id="581" class="Symbol">}{</a><a id="583" class="Bound">B</a><a id="584" class="Symbol">}{</a><a id="586" class="Bound">X</a><a id="587" class="Symbol">}</a> <a id="589" class="Symbol">=</a> <a id="591" class="Field">⟨</a> <a id="593" class="Bound">A</a> <a id="595" class="Field">⊎?</a> <a id="598" class="Bound">B</a> <a id="600" class="Field">⟩</a> <a id="602" class="Bound">X</a>

  <a id="_∣_.to"></a><a id="607" href="Prelude.Variants.html#607" class="Function">to</a> <a id="610" class="Symbol">:</a> <a id="612" href="Prelude.Variants.html#512" class="Bound">X</a> <a id="614" class="Symbol">→</a> <a id="616" href="Prelude.Variants.html#508" class="Bound">A</a> <a id="618" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="620" href="Prelude.Variants.html#510" class="Bound">B</a>
  <a id="624" href="Prelude.Variants.html#607" class="Function">to</a> <a id="627" class="Keyword">with</a> <a id="632" href="Prelude.Variants.html#544" class="Field">X≡</a>
  <a id="637" href="Prelude.Variants.html#607" class="Function">...</a> <a id="641" class="Symbol">|</a> <a id="643" href="Prelude.Variants.html#458" class="InductiveConstructor">𝕃</a> <a id="645" class="Symbol">=</a> <a id="647" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a>
  <a id="654" href="Prelude.Variants.html#607" class="Function">...</a> <a id="658" class="Symbol">|</a> <a id="660" href="Prelude.Variants.html#481" class="InductiveConstructor">ℝ</a> <a id="662" class="Symbol">=</a> <a id="664" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a>
  <a id="671" class="Keyword">syntax</a> <a id="678" href="Prelude.Variants.html#607" class="Function">to</a> <a id="681" class="Symbol">{</a>A <a id="684" class="Symbol">=</a> <a id="686" class="Bound">A</a><a id="687" class="Symbol">}</a> <a id="689" class="Symbol">{</a>B <a id="692" class="Symbol">=</a> <a id="694" class="Bound">B</a><a id="695" class="Symbol">}</a> <a id="697" class="Symbol">=</a> <a id="699" class="Function">to⟨</a> <a id="703" class="Bound">A</a> <a id="705" class="Function">⊎?</a> <a id="708" class="Bound">B</a> <a id="710" class="Function">⟩</a>
<a id="712" class="Keyword">open</a> <a id="717" href="Prelude.Variants.html#503" class="Module Operator">_∣_</a> <a id="721" class="Symbol">⦃...⦄</a> <a id="727" class="Keyword">public</a>

<a id="735" class="Keyword">private</a> <a id="743" class="Keyword">variable</a> <a id="752" href="Prelude.Variants.html#752" class="Generalizable">X</a> <a id="754" href="Prelude.Variants.html#754" class="Generalizable">Y</a> <a id="756" class="Symbol">:</a> <a id="758" href="Agda.Primitive.html#320" class="Primitive">Type</a>

<a id="764" class="Keyword">instance</a>
  <a id="Pick𝕃"></a><a id="775" href="Prelude.Variants.html#775" class="Function">Pick𝕃</a> <a id="781" class="Symbol">:</a> <a id="783" class="Symbol">(</a><a id="784" href="Prelude.Variants.html#752" class="Generalizable">X</a> <a id="786" href="Prelude.Variants.html#503" class="Record Operator">∣</a> <a id="788" href="Prelude.Variants.html#754" class="Generalizable">Y</a><a id="789" class="Symbol">)</a> <a id="791" href="Prelude.Variants.html#752" class="Generalizable">X</a>
  <a id="795" href="Prelude.Variants.html#775" class="Function">Pick𝕃</a> <a id="801" class="Symbol">=</a> <a id="803" class="Keyword">record</a> <a id="810" class="Symbol">{</a><a id="811" href="Prelude.Variants.html#544" class="Field">X≡</a> <a id="814" class="Symbol">=</a> <a id="816" href="Prelude.Variants.html#458" class="InductiveConstructor">𝕃</a><a id="817" class="Symbol">}</a>

  <a id="Pickℝ"></a><a id="822" href="Prelude.Variants.html#822" class="Function">Pickℝ</a> <a id="828" class="Symbol">:</a> <a id="830" class="Symbol">(</a><a id="831" href="Prelude.Variants.html#752" class="Generalizable">X</a> <a id="833" href="Prelude.Variants.html#503" class="Record Operator">∣</a> <a id="835" href="Prelude.Variants.html#754" class="Generalizable">Y</a><a id="836" class="Symbol">)</a> <a id="838" href="Prelude.Variants.html#754" class="Generalizable">Y</a>
  <a id="842" href="Prelude.Variants.html#822" class="Function">Pickℝ</a> <a id="848" class="Symbol">=</a> <a id="850" class="Keyword">record</a> <a id="857" class="Symbol">{</a><a id="858" href="Prelude.Variants.html#544" class="Field">X≡</a> <a id="861" class="Symbol">=</a> <a id="863" href="Prelude.Variants.html#481" class="InductiveConstructor">ℝ</a><a id="864" class="Symbol">}</a>

<a id="867" class="Keyword">open</a> <a id="872" class="Keyword">import</a> <a id="879" href="Prelude.Show.html" class="Module">Prelude.Show</a>

<a id="test-variant"></a><a id="893" href="Prelude.Variants.html#893" class="Function">test-variant</a> <a id="906" class="Symbol">:</a> <a id="908" class="Symbol">⦃</a> <a id="910" class="Symbol">(</a><a id="911" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="913" href="Prelude.Variants.html#503" class="Record Operator">∣</a> <a id="915" href="Agda.Builtin.String.html#318" class="Postulate">String</a><a id="921" class="Symbol">)</a> <a id="923" href="Prelude.Variants.html#752" class="Generalizable">X</a> <a id="925" class="Symbol">⦄</a> <a id="927" class="Symbol">→</a> <a id="929" href="Prelude.Variants.html#752" class="Generalizable">X</a> <a id="931" class="Symbol">→</a> <a id="933" href="Agda.Builtin.String.html#318" class="Postulate">String</a>
<a id="940" href="Prelude.Variants.html#893" class="Function">test-variant</a> <a id="953" class="Symbol">{</a><a id="954" class="Argument">X</a> <a id="956" class="Symbol">=</a> <a id="958" href="Prelude.Variants.html#958" class="Bound">X</a><a id="959" class="Symbol">}</a> <a id="961" class="Keyword">with</a> <a id="966" href="Prelude.Variants.html#544" class="Field">⟨</a> <a id="968" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="970" href="Prelude.Variants.html#544" class="Field">⊎?</a> <a id="973" href="Agda.Builtin.String.html#318" class="Postulate">String</a> <a id="980" href="Prelude.Variants.html#544" class="Field">⟩</a> <a id="982" href="Prelude.Variants.html#958" class="Bound">X</a>
<a id="984" class="Symbol">...</a> <a id="988" class="Symbol">|</a> <a id="990" href="Prelude.Variants.html#458" class="InductiveConstructor">𝕃</a> <a id="992" class="Symbol">=</a> <a id="994" href="Prelude.Show.html#351" class="Field">show</a>
<a id="999" class="Symbol">...</a> <a id="1003" class="Symbol">|</a> <a id="1005" href="Prelude.Variants.html#481" class="InductiveConstructor">ℝ</a> <a id="1007" class="Symbol">=</a> <a id="1009" href="Function.Base.html#624" class="Function">id</a>
<a id="1012" class="Comment">-- test-variant x with to⟨ ℕ ⊎? String ⟩ x</a>
<a id="1055" class="Comment">-- ... | inj₁ n = show n</a>
<a id="1080" class="Comment">-- ... | inj₂ s = s</a>
</pre></body></html>