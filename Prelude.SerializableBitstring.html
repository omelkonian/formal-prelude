<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Prelude.SerializableBitstring</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-prelude/tree/master/Prelude/SerializableBitstring.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Prelude.SerializableBitstring.html" class="Module">Prelude.SerializableBitstring</a> <a id="38" class="Keyword">where</a>

<a id="45" class="Keyword">open</a> <a id="50" class="Keyword">import</a> <a id="57" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="69" class="Symbol">;</a> <a id="71" class="Keyword">open</a> <a id="76" href="Prelude.Init.html#481" class="Module">SetAsType</a>
<a id="86" class="Keyword">open</a> <a id="91" class="Keyword">import</a> <a id="98" href="Prelude.Bitstring.html" class="Module">Prelude.Bitstring</a>
<a id="116" class="Keyword">open</a> <a id="121" class="Keyword">import</a> <a id="128" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="140" class="Keyword">open</a> <a id="145" class="Keyword">import</a> <a id="152" href="Prelude.FromN.html" class="Module">Prelude.FromN</a>
<a id="166" class="Keyword">open</a> <a id="171" class="Keyword">import</a> <a id="178" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>

<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="Prelude.Serializable.html" class="Module">Prelude.Serializable</a> <a id="232" href="Prelude.Bitstring.html#641" class="Function">Bitstring</a> <a id="242" class="Keyword">public</a>

<a id="250" class="Keyword">instance</a>
  <a id="Serializable-ℕ"></a><a id="261" href="Prelude.SerializableBitstring.html#261" class="Function">Serializable-ℕ</a> <a id="276" class="Symbol">:</a> <a id="278" href="Prelude.Serializable.html#134" class="Record">Serializable</a> <a id="291" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="295" href="Prelude.SerializableBitstring.html#261" class="Function">Serializable-ℕ</a> <a id="310" class="Symbol">.</a><a id="311" href="Prelude.Serializable.html#183" class="Field">encode</a> <a id="318" class="Symbol">=</a> <a id="320" href="Prelude.FromN.html#120" class="Field">fromℕ</a>
  <a id="328" href="Prelude.SerializableBitstring.html#261" class="Function">Serializable-ℕ</a> <a id="343" class="Symbol">.</a><a id="344" href="Prelude.Serializable.html#205" class="Field">encode-injective</a> <a id="361" class="Symbol">=</a> <a id="363" href="Prelude.Bitstring.html#1723" class="Postulate">fromℕ-injective</a>
  <a id="381" href="Prelude.SerializableBitstring.html#261" class="Function">Serializable-ℕ</a> <a id="396" class="Symbol">.</a><a id="397" href="Prelude.Serializable.html#247" class="Field">decode</a> <a id="404" class="Symbol">=</a> <a id="406" href="Prelude.Applicative.html#545" class="Field">pure</a> <a id="411" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="413" href="Prelude.ToN.html#116" class="Field">toℕ</a>
  <a id="419" href="Prelude.SerializableBitstring.html#261" class="Function">Serializable-ℕ</a> <a id="434" class="Symbol">.</a><a id="435" href="Prelude.Serializable.html#275" class="Field">encode-decode</a> <a id="449" href="Prelude.SerializableBitstring.html#449" class="Bound">m</a> <a id="451" href="Prelude.SerializableBitstring.html#451" class="Bound">x</a> <a id="453" class="Symbol">.</a><a id="454" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="460" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
    <a id="469" class="Symbol">=</a> <a id="471" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="475" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="477" href="Prelude.Bitstring.html#1772" class="Postulate">fromℕ∘toℕ</a> <a id="487" href="Prelude.SerializableBitstring.html#449" class="Bound">m</a>
  <a id="491" href="Prelude.SerializableBitstring.html#261" class="Function">Serializable-ℕ</a> <a id="506" class="Symbol">.</a><a id="507" href="Prelude.Serializable.html#275" class="Field">encode-decode</a> <a id="521" href="Prelude.SerializableBitstring.html#521" class="Bound">m</a> <a id="523" href="Prelude.SerializableBitstring.html#523" class="Bound">x</a> <a id="525" class="Symbol">.</a><a id="526" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="532" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
    <a id="541" class="Symbol">=</a> <a id="543" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="548" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="553" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="555" href="Prelude.Bitstring.html#1820" class="Postulate">toℕ∘fromℕ</a> <a id="565" href="Prelude.SerializableBitstring.html#523" class="Bound">x</a>

<a id="568" class="Comment">{-
open import Prelude.Semigroup
open import Prelude.Functor
open import Prelude.Measurable
open import Prelude.Monad

private variable
  a b : Level
  A : Type a
  B : Type b

instance
  Serializable-⊎ : ⦃ Serializable A ⦄ → ⦃ Serializable B ⦄ → Serializable (A ⊎ B)
  Serializable-⊎ .encode = λ where
    (inj₁ a) → fromBits $ 0b ∷ toBits (encode a)
    (inj₂ b) → fromBits $ 1b ∷ toBits (encode b)
  Serializable-⊎ .encode-injective {inj₁ x} {inj₁ x₁} eq = {!!}
  Serializable-⊎ .encode-injective {inj₁ x} {inj₂ y} eq = {!!}
  Serializable-⊎ .encode-injective {inj₂ y} {inj₁ x} eq = {!!}
  Serializable-⊎ .encode-injective {inj₂ y} {inj₂ y₁} eq = {!!}
  Serializable-⊎ .decode = toBits &gt;≡&gt; λ where
    [] → nothing
    (0b ∷ bs) → inj₁ &lt;$&gt; decode (fromBits bs)
    (1b ∷ bs) → inj₂ &lt;$&gt; decode (fromBits bs)
  Serializable-⊎ .encode-decode m x .proj₁ = {!!}
  Serializable-⊎ .encode-decode m x .proj₂ = {!!}

  Serializable-× : ⦃ Serializable A ⦄ → ⦃ Serializable B ⦄ → Serializable (A × B)
  Serializable-× .encode (a , b) =
    let
      𝕒 = encode a
      𝕓 = encode b
    in
      encode ∣ 𝕒 ∣ ◇ 𝕒 ◇ 𝕓
  Serializable-× .encode-injective {x} {y} eq = {!!}

  Serializable-× .decode m = {!!}
  -- Serializable-× .decode m = do
  --   let ∣a∣ , m′ = L.splitAt ? m
  --   n ← decode ∣a∣
  --   let 𝕒 , 𝕓 = L.splitAt n m′
  --   a ← decode 𝕒
  --   b ← decode 𝕓
  --   return (a , b)

  Serializable-× .encode-decode m x .proj₁ = {!!}
  Serializable-× .encode-decode m x .proj₂ = {!!}

private
  instance
    postulate Serializable-String : Serializable String

  data X : Type where
    mk₁ : ℕ → X
    mk₂ : String → X

  instance
    Serializable-X : Serializable X
    Serializable-X .encode = λ where
      (mk₁ n) → encode {A = ℕ ⊎ String} (inj₁ n)
      (mk₂ s) → encode {A = ℕ ⊎ String} (inj₂ s)
    Serializable-X .encode-injective = {!!}
    Serializable-X .decode
      = decode {A = ℕ ⊎ String} &gt;≡&gt; fmap (λ where (inj₁ n) → mk₁ n; (inj₂ s) → mk₂ s)
    Serializable-X .encode-decode m x = λ where
      .proj₁ → {!!}
      .proj₂ → {!!}
-}</a>
</pre></body></html>