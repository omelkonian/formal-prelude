<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Prelude.SerializableBitstring</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-prelude/tree/master/Prelude/SerializableBitstring.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--with-K</a> <a id="22" class="Symbol">#-}</a>
<a id="26" class="Keyword">module</a> <a id="33" href="Prelude.SerializableBitstring.html" class="Module">Prelude.SerializableBitstring</a> <a id="63" class="Keyword">where</a>

<a id="70" class="Keyword">open</a> <a id="75" class="Keyword">import</a> <a id="82" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="94" class="Symbol">;</a> <a id="96" class="Keyword">open</a> <a id="101" href="Prelude.Init.html#504" class="Module">SetAsType</a>
<a id="111" class="Keyword">open</a> <a id="116" class="Keyword">import</a> <a id="123" href="Prelude.Bitstring.html" class="Module">Prelude.Bitstring</a>
<a id="141" class="Keyword">open</a> <a id="146" class="Keyword">import</a> <a id="153" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="165" class="Keyword">open</a> <a id="170" class="Keyword">import</a> <a id="177" href="Prelude.FromN.html" class="Module">Prelude.FromN</a>
<a id="191" class="Keyword">open</a> <a id="196" class="Keyword">import</a> <a id="203" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>

<a id="224" class="Keyword">open</a> <a id="229" class="Keyword">import</a> <a id="236" href="Prelude.Serializable.html" class="Module">Prelude.Serializable</a> <a id="257" href="Prelude.Bitstring.html#666" class="Function">Bitstring</a> <a id="267" class="Keyword">public</a>

<a id="275" class="Keyword">instance</a>
  <a id="Serializable-â„•"></a><a id="286" href="Prelude.SerializableBitstring.html#286" class="Function">Serializable-â„•</a> <a id="301" class="Symbol">:</a> <a id="303" href="Prelude.Serializable.html#134" class="Record">Serializable</a> <a id="316" href="Agda.Builtin.Nat.html#186" class="Datatype">â„•</a>
  <a id="320" href="Prelude.SerializableBitstring.html#286" class="Function">Serializable-â„•</a> <a id="335" class="Symbol">.</a><a id="336" href="Prelude.Serializable.html#183" class="Field">encode</a> <a id="343" class="Symbol">=</a> <a id="345" href="Prelude.FromN.html#143" class="Field">fromâ„•</a>
  <a id="353" href="Prelude.SerializableBitstring.html#286" class="Function">Serializable-â„•</a> <a id="368" class="Symbol">.</a><a id="369" href="Prelude.Serializable.html#205" class="Field">encode-injective</a> <a id="386" class="Symbol">=</a> <a id="388" href="Prelude.Bitstring.html#1748" class="Postulate">fromâ„•-injective</a>
  <a id="406" href="Prelude.SerializableBitstring.html#286" class="Function">Serializable-â„•</a> <a id="421" class="Symbol">.</a><a id="422" href="Prelude.Serializable.html#247" class="Field">decode</a> <a id="429" class="Symbol">=</a> <a id="431" href="Prelude.Applicative.html#568" class="Field">pure</a> <a id="436" href="Function.Base.html#1040" class="Function Operator">âˆ˜</a> <a id="438" href="Prelude.ToN.html#139" class="Field">toâ„•</a>
  <a id="444" href="Prelude.SerializableBitstring.html#286" class="Function">Serializable-â„•</a> <a id="459" class="Symbol">.</a><a id="460" href="Prelude.Serializable.html#275" class="Field">encode-decode</a> <a id="474" href="Prelude.SerializableBitstring.html#474" class="Bound">m</a> <a id="476" href="Prelude.SerializableBitstring.html#476" class="Bound">x</a> <a id="478" class="Symbol">.</a><a id="479" href="Agda.Builtin.Sigma.html#234" class="Field">projâ‚</a> <a id="485" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="494" class="Symbol">=</a> <a id="496" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="500" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="502" href="Prelude.Bitstring.html#1797" class="Postulate">fromâ„•âˆ˜toâ„•</a> <a id="512" href="Prelude.SerializableBitstring.html#474" class="Bound">m</a>
  <a id="516" href="Prelude.SerializableBitstring.html#286" class="Function">Serializable-â„•</a> <a id="531" class="Symbol">.</a><a id="532" href="Prelude.Serializable.html#275" class="Field">encode-decode</a> <a id="546" href="Prelude.SerializableBitstring.html#546" class="Bound">m</a> <a id="548" href="Prelude.SerializableBitstring.html#548" class="Bound">x</a> <a id="550" class="Symbol">.</a><a id="551" href="Agda.Builtin.Sigma.html#246" class="Field">projâ‚‚</a> <a id="557" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="566" class="Symbol">=</a> <a id="568" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="573" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="578" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="580" href="Prelude.Bitstring.html#1845" class="Postulate">toâ„•âˆ˜fromâ„•</a> <a id="590" href="Prelude.SerializableBitstring.html#548" class="Bound">x</a>

<a id="593" class="Comment">{-
open import Prelude.Semigroup
open import Prelude.Functor
open import Prelude.Measurable
open import Prelude.Monad

private variable
  a b : Level
  A : Type a
  B : Type b

instance
  Serializable-âŠ : â¦ƒ Serializable A â¦„ â†’ â¦ƒ Serializable B â¦„ â†’ Serializable (A âŠ B)
  Serializable-âŠ .encode = Î» where
    (injâ‚ a) â†’ fromBits $ 0b âˆ· toBits (encode a)
    (injâ‚‚ b) â†’ fromBits $ 1b âˆ· toBits (encode b)
  Serializable-âŠ .encode-injective {injâ‚ x} {injâ‚ xâ‚} eq = {!!}
  Serializable-âŠ .encode-injective {injâ‚ x} {injâ‚‚ y} eq = {!!}
  Serializable-âŠ .encode-injective {injâ‚‚ y} {injâ‚ x} eq = {!!}
  Serializable-âŠ .encode-injective {injâ‚‚ y} {injâ‚‚ yâ‚} eq = {!!}
  Serializable-âŠ .decode = toBits &gt;â‰¡&gt; Î» where
    [] â†’ nothing
    (0b âˆ· bs) â†’ injâ‚ &lt;$&gt; decode (fromBits bs)
    (1b âˆ· bs) â†’ injâ‚‚ &lt;$&gt; decode (fromBits bs)
  Serializable-âŠ .encode-decode m x .projâ‚ = {!!}
  Serializable-âŠ .encode-decode m x .projâ‚‚ = {!!}

  Serializable-Ã— : â¦ƒ Serializable A â¦„ â†’ â¦ƒ Serializable B â¦„ â†’ Serializable (A Ã— B)
  Serializable-Ã— .encode (a , b) =
    let
      ğ•’ = encode a
      ğ•“ = encode b
    in
      encode âˆ£ ğ•’ âˆ£ â—‡ ğ•’ â—‡ ğ•“
  Serializable-Ã— .encode-injective {x} {y} eq = {!!}

  Serializable-Ã— .decode m = {!!}
  -- Serializable-Ã— .decode m = do
  --   let âˆ£aâˆ£ , mâ€² = L.splitAt ? m
  --   n â† decode âˆ£aâˆ£
  --   let ğ•’ , ğ•“ = L.splitAt n mâ€²
  --   a â† decode ğ•’
  --   b â† decode ğ•“
  --   return (a , b)

  Serializable-Ã— .encode-decode m x .projâ‚ = {!!}
  Serializable-Ã— .encode-decode m x .projâ‚‚ = {!!}

private
  instance
    postulate Serializable-String : Serializable String

  data X : Type where
    mkâ‚ : â„• â†’ X
    mkâ‚‚ : String â†’ X

  instance
    Serializable-X : Serializable X
    Serializable-X .encode = Î» where
      (mkâ‚ n) â†’ encode {A = â„• âŠ String} (injâ‚ n)
      (mkâ‚‚ s) â†’ encode {A = â„• âŠ String} (injâ‚‚ s)
    Serializable-X .encode-injective = {!!}
    Serializable-X .decode
      = decode {A = â„• âŠ String} &gt;â‰¡&gt; fmap (Î» where (injâ‚ n) â†’ mkâ‚ n; (injâ‚‚ s) â†’ mkâ‚‚ s)
    Serializable-X .encode-decode m x = Î» where
      .projâ‚ â†’ {!!}
      .projâ‚‚ â†’ {!!}
-}</a>
</pre></body></html>